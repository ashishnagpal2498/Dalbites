stages:          # List of stages for jobs, and their order of execution
  - test_login
  
variables:
  BACKEND_IMAGE:  maven:3.8.3-openjdk-17  # Base image for the backend   
  FRONTEND_IMAGE: node:18-alpine3.17

# # test_backend
test_eas_login:
  stage: test_login
  image: $FRONTEND_IMAGE
  before_script:
    - node --version
    - cd Frontend
    - npm install -g expo-cli
    - echo "Expo CLI installed"
    - npm install -g eas-cli 
    - echo "EAS Cli installed"
  script:
    - echo "Username-$EAS_LOGIN_USERNAME"
    - echo "Password-$EAS_LOGIN_PASSWORD"
    - apk add --no-cache expect
    # - >
    #   expect - "
    #     spawn eas login
    #     expect "Email or username"
    #     send "$EAS_LOGIN_USERNAME\r"
    #     expect "Password"
    #     send "$EAS_LOGIN_PASSWORD\r"
    #     expect "Logged in"
    #     expect eof
    #   "
    - >
      expect -c "
        spawn eas login --non-interactive
        expect \"Email or username\"
        send \"$EAS_LOGIN_USERNAME\r\"
        expect \"Password\"
        send \"$EAS_LOGIN_PASSWORD\r\"
        expect \"Logged in\"
        expect eof
      "
  only:
    - frontend
